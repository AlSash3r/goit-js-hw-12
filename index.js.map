{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function renderImages(arr) {\r\n  return arr\r\n    .map(\r\n      ({\r\n        webformatURL,\r\n        largeImageURL,\r\n        tags,\r\n        likes,\r\n        views,\r\n        comments,\r\n        downloads,\r\n      }) => `\r\n                <a href=\"${largeImageURL}\" class=\"list-item\">\r\n                    <div class=\"describe\">\r\n                        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"list-image\">\r\n                    </div>\r\n                    <ul class=\"categories\">\r\n                        <li class=\"categories-item\">\r\n                            <h2 class=\"link-text\">Likes</h2>\r\n                            <p class=\"number\">${likes}</p>\r\n                        </li>\r\n                        <li class=\"categories-item\">\r\n                            <h2 class=\"link-text\">Views</h2>\r\n                            <p class=\"number\">${views}</p>\r\n                        </li>\r\n                        <li class=\"categories-item\">\r\n                            <h2 class=\"link-text\">Comments</h2>\r\n                            <p class=\"number\">${comments}</p>\r\n                        </li>\r\n                        <li class=\"categories-item\">\r\n                            <h2 class=\"link-text\">Downloads</h2>\r\n                            <p class=\"number\">${downloads}</p>\r\n                        </li>\r\n                    </ul>\r\n                </a>\r\n            </li>\r\n        `\r\n    )\r\n    .join('');\r\n}\r\nexport default renderImages;\r\n","import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport { renderImages } from './js/render-functions';\r\nconst form = document.querySelector('.form');\r\nconst list = document.querySelector('.list');\r\nconst loading = document.querySelector('.loader');\r\nconst loadMoreBtn = document.querySelector('.load-button'); \r\nconst input = document.querySelector('.input');\r\nform.addEventListener('submit', submitForm);\r\nloadMoreBtn.addEventListener('click', loadMorePictures);\r\nlet page;\r\nlet value;\r\nconst API_KEY = '47671198-bf70cd038d5f77d4168ecf4e9'; \r\nconst BASE_URL = 'https://pixabay.com/api/';\r\nasync function fetchImages(value, page = 1) {\r\n  const params = new URLSearchParams({\r\n    key: API_KEY,\r\n    q: value,\r\n    image_type: 'photo',\r\n    orientation: 'horizontal',\r\n    safesearch: true,\r\n    per_page: 15,\r\n    page,\r\n  });\r\n  const response = await axios.get(`${BASE_URL}?${params}`);\r\n  return response.data;\r\n}\r\nasync function submitForm(event) {\r\n  event.preventDefault();\r\n  page = 1;\r\n  value = input.value.trim();\r\n  loadMoreBtn.style.display = 'none';\r\n  loading.style.display = 'inline-block';\r\n  list.innerHTML = '';\r\n  if (!value) {\r\n    loading.style.display = 'none';\r\n    iziToast.warning({\r\n      position: 'topRight',\r\n      message: 'Please enter a search item.',\r\n    });\r\n    return;\r\n  }\r\n  try {\r\n    const data = await fetchImages(value, page);\r\n    if (data.total === 0) {\r\n      loading.style.display = 'none';\r\n      clearGallery();\r\n      return;\r\n    }\r\n    list.innerHTML = renderImages(data.hits);\r\n    initSimpleLightbox();\r\n    const total = data.totalHits;\r\n    const totalPages = Math.ceil(total / 15);\r\n    if (page >= totalPages) {\r\n      iziToast.info({\r\n        position: 'topRight',\r\n        message: \"We're sorry, but there are no more images for your request.\",\r\n      });\r\n      loadMoreBtn.style.display = 'none';\r\n      return;\r\n    }\r\n    page++;\r\n    loadMoreBtn.style.display = 'block';\r\n  } catch (error) {\r\n    loading.style.display = 'none';\r\n    iziToast.error({\r\n      position: 'topRight',\r\n      message: error.message,\r\n      maxWidth: 432,\r\n    });\r\n  } finally {\r\n    loading.style.display = 'none';\r\n  }\r\n}\r\nfunction clearGallery() {\r\n  iziToast.error({\r\n    position: 'topRight',\r\n    message:\r\n      'Sorry, there are no images matching your search query. Please try again!',\r\n    maxWidth: 432,\r\n  });\r\n  list.innerHTML = '';\r\n  loadMoreBtn.style.display = 'none';\r\n}\r\nfunction initSimpleLightbox() {\r\n  const lightbox = new SimpleLightbox('.list-item', {\r\n    captions: true,\r\n    captionsData: 'alt',\r\n    captionDelay: 150,\r\n  });\r\n  lightbox.refresh();\r\n}\r\nasync function loadMorePictures(event) {\r\n  event.preventDefault();\r\n  loadMoreBtn.style.display = 'none';\r\n  loading.style.display = 'inline-block';\r\n  try {\r\n    const data = await fetchImages(value, page);\r\n    list.insertAdjacentHTML('beforeend', renderImages(data.hits));\r\n    scrollBy();\r\n    initSimpleLightbox();\r\n    const total = data.totalHits;\r\n    const totalPages = Math.ceil(total / 15);\r\n    if (page >= totalPages) {\r\n      iziToast.info({\r\n        position: 'topRight',\r\n        message: \"We're sorry, but you've reached the end of search results.\",\r\n      });\r\n      loadMoreBtn.style.display = 'none';\r\n      return;\r\n    }\r\n    page++;\r\n    loadMoreBtn.style.display = 'block';\r\n  } catch (error) {\r\n    loading.style.display = 'none';\r\n    iziToast.error({\r\n      position: 'topRight',\r\n      message: error.message,\r\n      maxWidth: 432,\r\n    });\r\n  } finally {\r\n    loading.style.display = 'none';\r\n  }\r\n}\r\nfunction scrollBy() {\r\n  const card = document.querySelector('.list-item');\r\n  const cardHeight = card.getBoundingClientRect().height;\r\n  window.scrollBy({\r\n    left: 0,\r\n    top: cardHeight * 2,\r\n    behavior: 'smooth',\r\n  });\r\n}\r\n"],"names":["renderImages","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","list","loading","loadMoreBtn","input","submitForm","loadMorePictures","page","value","API_KEY","BASE_URL","fetchImages","params","axios","event","iziToast","data","clearGallery","initSimpleLightbox","total","totalPages","error","SimpleLightbox","scrollBy","cardHeight"],"mappings":"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"}